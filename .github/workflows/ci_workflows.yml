name: CI

on:
  push:
    branches:
    - main
    - '*'
    tags:
    - '*'
  pull_request:

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  ARCH_ON_CI: "normal"
  IS_CRON: "false"

permissions:
  contents: read

jobs:
  tests:
    uses: astrofrog/github-actions-workflows/.github/workflows/tox.yml@freethreaded  # v1.16.0
    secrets:
      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
    with:
      setenv: |
        ARCH_ON_CI: "normal"
        IS_CRON: "false"
      submodules: false
      coverage: ''
      libraries: |
        apt:
          - language-pack-fr
          - tzdata
      envs: |

        - linux: py313t-test
          posargs: --durations=50 --run-slow
          runs-on: macos-latest
